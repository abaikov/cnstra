"use strict";(self.webpackChunkcnstra_docs=self.webpackChunkcnstra_docs||[]).push([[839],{3680:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"frontend/react-patterns","title":"React Patterns with CNStra","description":"Common patterns to use CNStra from React.","source":"@site/frontend/react-patterns.md","sourceDirName":"frontend","slug":"/frontend/react-patterns","permalink":"/docs/frontend/react-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/abaikov/cnstra/edit/master/docs/frontend/react-patterns.md","tags":[],"version":"current","lastUpdatedAt":1759800880000,"frontMatter":{"id":"react-patterns","title":"React Patterns with CNStra","sidebar_label":"React Patterns","slug":"/frontend/react-patterns"},"sidebar":"docs","previous":{"title":"CNStra & OIMDB","permalink":"/docs/frontend/oimdb"},"next":{"title":"Overview","permalink":"/docs/backend/overview"}}');var s=n(4848),o=n(8453);const a={id:"react-patterns",title:"React Patterns with CNStra",sidebar_label:"React Patterns",slug:"/frontend/react-patterns"},i=void 0,l={},c=[{value:"Stimulate on mount or on deps change",id:"stimulate-on-mount-or-on-deps-change",level:2},{value:"Keep UI responsive with abort",id:"keep-ui-responsive-with-abort",level:2},{value:"Derive UI lists via OIMDB",id:"derive-ui-lists-via-oimdb",level:2},{value:"Error and loading states",id:"error-and-loading-states",level:2},{value:"Testing",id:"testing",level:2}];function d(e){const t={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Common patterns to use CNStra from React."}),"\n",(0,s.jsx)(t.h2,{id:"stimulate-on-mount-or-on-deps-change",children:"Stimulate on mount or on deps change"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"const [result, stimulate] = useNeuron(myNeuron);\nuseEffect(() => {\n  stimulate({ userId });\n}, [userId]);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"keep-ui-responsive-with-abort",children:"Keep UI responsive with abort"}),"\n",(0,s.jsxs)(t.p,{children:["Use the ",(0,s.jsx)(t.code,{children:"AbortSignal"})," supported by CNStra to cancel in-flight runs."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"const controller = useRef<AbortController>();\nconst [data, stimulate] = useNeuron(searchNeuron);\n\nfunction onSearch(q: string) {\n  controller.current?.abort();\n  controller.current = new AbortController();\n  stimulate(q, { abortSignal: controller.current.signal });\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"derive-ui-lists-via-oimdb",children:"Derive UI lists via OIMDB"}),"\n",(0,s.jsx)(t.p,{children:"Use OIMDB for queryable derived state (dashboards, analytics) and subscribe via hooks."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"const items = useSelectEntitiesByIndexKey(db.tables.logs, 'byType', 'warning');\n"})}),"\n",(0,s.jsx)(t.h2,{id:"error-and-loading-states",children:"Error and loading states"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"const [user, stimulate, status] = useNeuron(fetchUserNeuron);\n// status: { loading: boolean, error?: unknown }\n"})}),"\n",(0,s.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Mock ",(0,s.jsx)(t.code,{children:"useNeuron"})," outputs for components"]}),"\n",(0,s.jsx)(t.li,{children:"Prefer unit tests for neurons and a smaller set of integration tests for flows"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(6540);const s={},o=r.createContext(s);function a(e){const t=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);